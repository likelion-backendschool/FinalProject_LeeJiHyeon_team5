<html xmlns:th="http://www.thymeleaf.org">
<script>
    $checkEmail.click(function){
        $.ajax({
            type : "POST",
            url : "mailConfirm",
            data : {
                "email" : email.val()
            },
            success : function(data){
                alert("해당 이메일로 인증번호가 발송되었습니다. \n 확인 부탁드립니다.")
                console.log("data : " +data)
                chkEmailConfirm(data, $memailconfirm, $memailconfirmTxt);
            }
        })
    })

        function chkEmailConfirm(data, $memailconfirm, $memailconfirmTxt){
            $memailconfirm.on("keyup", function(){
                if(data != $memailconfirm.val()){
                    emconfirmchk = false;
                    $memailconfirmTxt.html("<span id='emconfirmchk'> 인증번호가 잘못되었습니다."</span>)
                    $("#emconfirmchk").css({
                        "color" : "#FA3E3E",
                        "font-weight" : "bold",
                        "font-size" : "10px"
                    })
                } else{
                    emconfirmchk = true;
                    $memailconfirmTxt.html("<span id='emconfirmchk'> 인증번호가 확인되었습니다."</span>)
                    $("#emconfirmchk").css({
                        "color" : "#0D6EFD",
                        "font-weight" : "bold",
                        "font-size" : "10px"
                    })


                }
            })
        }
</script>



    <div class="my-3 border-bottom">
        <div>6^
            <h4>회원가입</h4>
        </div>
    </div>
    <form th:action="@{/member/join}"  method="post">

        <div class="mb-3">
            <label class="form-label">사용자ID</label>
            <input type="text" name="username" class="form-control">
        </div>
        <div class="mb-3">
            <label class="form-label">비밀번호</label>
            <input type="password" name="password" class="form-control">
        </div>
        <div class="mb-3">
            <label class="form-label">비밀번호 확인</label>
            <input type="password" name="password2" class="form-control">
        </div>
<!--        <div class="mb-3">-->
<!--            <label class="form-label">이메일</label>-->
<!--            <input type="email"name="email" class="form-control">-->
<!--        </div>-->
<!--        인증번호 확인    -->


<!--        <div class="form-group last mb-4 email_input">-->
<!--            <label for="memail" id="mailTxt">이메일</label>-->
<!--            <input type="text" class="form-control" name="memail" id="memail">-->
<!--        </div>-->

        <!-- <span>이메일 </span> -->
        <div class="form-group last mb-4 email_input">
            <label for="email" id="mailTxt">이메일</label>
            <input type="text" class="form-control" name="email" id="email">
        </div>
        <!-- <span>이메일 인증번호</span> -->
        <button class="btn btn-outline-primary" type="button" id="checkEmail">인증번호</button>


        <div class="form-group last mb-4 check_input">
            <label for="memailconfirm" id="memailconfirmTxt">인증번호를 입력해주세요</label>
            <input type="text" class="form-control" id="memailconfirm">
        </div>

        <!-- 메일 확인-->

        <div class="mb-3">
            <label class="form-label">별명</label>
            <input type="text" name="nickName" class="form-control">
        </div>
        <button type="submit" class="btn btn-primary">회원가입</button>
    </form>
</div>
</html>